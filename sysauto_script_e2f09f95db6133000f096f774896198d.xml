<?xml version="1.0" encoding="UTF-8"?>
<unload unload_date="2020-02-19 00:39:41">
<sysauto_script action="INSERT_OR_UPDATE">
<active>true</active>
<condition/>
<conditional>false</conditional>
<name>Keep Alive - Session</name>
<run_as display_value="System Administrator">6816f79cc0a8016401c5a33be04be441</run_as>
<run_as_tz/>
<run_dayofmonth>1</run_dayofmonth>
<run_dayofweek>1</run_dayofweek>
<run_period>1970-01-01 00:15:00</run_period>
<run_start>2019-05-20 16:46:56</run_start>
<run_time>1970-01-01 08:00:00</run_time>
<run_type>periodically</run_type>
<script><![CDATA[// Verify userid/password for basic auth

var instanceName = gs.getProperty('instance_name');
var endPoint = "https://" + instanceName + ".service-now.com/api/now/v1/sg/applications";
var user = "itil";
var pwd = "itil";


//London and early version
//var endPoint = "https://" + instanceName + ".service-now.com/login.do";
// var restMessage = new sn_ws.RESTMessageV2();
// restMessage.setBasicAuth("itil", "itil");
// restMessage.setHttpMethod("post");
// restMessage.setRequestHeader("Content-Type","application/xml");
// restMessage.setRequestHeader("User-Agent","Mozilla/5.0");
// restMessage.setEndpoint(endPoint);
// restMessage.setQueryParameter("user_name","itil");
// restMessage.setQueryParameter("user_password","itil");
// restMessage.setQueryParameter("sys_action","sysverb_login");
// restMessage.setQueryParameter("sysparm_login_url","navpage.do");
// restMessage.setQueryParameter("language_select","en");
// var response = restMessage.execute();

var restMessage = new sn_ws.RESTMessageV2();
restMessage.setBasicAuth(user,pwd);
restMessage.setHttpMethod("get");
restMessage.setRequestHeader("Content-Type","application/xml");
restMessage.setRequestHeader("User-Agent","Mozilla/5.0");
restMessage.setRequestHeader("X-Interactive-Session","true");
restMessage.setEndpoint(endPoint);
var response = restMessage.execute();

//gs.info("Ran Activity Script with error code of: "+ response.getErrorCode(),'tbd');
//gs.info("response is: " + response.getBody(),'tbd');



]]></script>
<sys_class_name>sysauto_script</sys_class_name>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2019-05-20 16:52:59</sys_created_on>
<sys_id>e2f09f95db6133000f096f774896198d</sys_id>
<sys_mod_count>4</sys_mod_count>
<sys_name>Keep Alive - Session</sys_name>
<sys_package display_value="Global" source="global">global</sys_package>
<sys_policy/>
<sys_scope display_value="Global">global</sys_scope>
<sys_update_name>sysauto_script_e2f09f95db6133000f096f774896198d</sys_update_name>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2019-09-11 03:36:18</sys_updated_on>
<upgrade_safe>false</upgrade_safe>
</sysauto_script>
</unload>
